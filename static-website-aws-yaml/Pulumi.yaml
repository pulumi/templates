name: ${PROJECT}
description: ${DESCRIPTION}
runtime: yaml

template:
  description: 
    A static website deployed on AWS
  config:
    aws:region:
      description: The AWS region to deploy into
      default: us-west-2
    sitePath:
      description: The path to a folder containing the compiled website
      default: ./site
    indexDocument:
      description: The default index document for the website
      default: index.html
    errorDocument:
      description: The default error document for the website
      default: error.html
    withCDN:
      description: Whether to provision a content-delivery network (CDN) with Amazon CloudFront
      default: "true"
    withAccessLogs:
      description: Whether to create an additional S3 bucket for website access logs
      default: "false"

configuration:
  sitePath:
    type: String
    default: ./site
  indexDocument:
    type: String
    default: index.html
  errorDocument:
    type: String
    default: error.html
  withCDN:
    type: String
    default: "true"
  withAccessLogs:
    type: String
    default: "false"
  
resources:
  site:
    type: aws-static-website:index:Website
    properties:
      sitePath: ${sitePath}
      indexHTML: ${indexDocument}
      error404: ${errorDocument}
      withCDN: ${withCDN}
      withLogs: ${withAccessLogs}

outputs:
  websiteBucket: ${site.bucketName}
  logsBucket: ${site.logsBucketName}
  originURL: ${site.bucketWebsiteURL}
  cdnURL: ${site.cdnURL}

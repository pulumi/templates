name: ${PROJECT}
description: ${DESCRIPTION}
runtime: yaml
template:
  description: Base networking template for Azure
  config:
    azure-native:location:
      default: westus2
      description: The Azure region in which to create the cluster
configuration:
  azure-native:location:
    type: String
  mgmtGroupId:
    type: String
resources:
  # Create a new resource group
  resourceGroup:
    type: azure-native:resources:ResourceGroup
    properties:
      location: ${azure-native:location}
      resourceGroupName: rg
  # Create a new virtual network
  virtualNetwork:
    type: azure-native:network:VirtualNetwork
    properties:
      addressSpace:
        # Define the CIDR used in the new virtual network
        addressPrefixes:
          - 10.0.0.0/16
      location: ${azure-native:location}
      resourceGroupName: ${resourceGroup.name}
      virtualNetworkName: vnet
  # Create subnets in the virtual network
  subnet1:
    type: azure-native:network:Subnet
    properties:
      addressPrefix: 10.0.0.0/22
      name: subnet-1
      resourceGroupName: ${resourceGroup.name}
      virtualNetworkName: ${virtualNetwork.name}
  subnet2:
    type: azure-native:network:Subnet
    properties:
      addressPrefix: 10.0.4.0/22
      name: subnet-2
      resourceGroupName: ${resourceGroup.name}
      virtualNetworkName: ${virtualNetwork.name}
  subnet3:
    type: azure-native:network:Subnet
    properties:
      addressPrefix: 10.0.8.0/22
      name: subnet-3
      resourceGroupName: ${resourceGroup.name}
      virtualNetworkName: ${virtualNetwork.name}
outputs: {}
